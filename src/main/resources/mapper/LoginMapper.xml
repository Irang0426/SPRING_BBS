<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bbs.demo.mapper.LoginMemberMapper">

    <!-- ì´ë©”ì¼ë¡œ ì‚¬ìš©ìž ì¡°íšŒ -->
    <select id="findbyEmail" parameterType="String" resultType="com.bbs.demo.domain.Users">
        SELECT id, nickname, email, password, reg_date as regDate, last_access_date as lastAccessDate, user_grade as userGrade FROM users WHERE email = #{email}
    </select>

    <!-- íšŒì› ì •ë³´ ì €ìž¥ -->
    <insert id="insert" parameterType="com.bbs.demo.domain.Users">
        INSERT INTO users (nickname, email, password, user_grade)
        VALUES (#{nickName}, #{email}, #{password}, 1)
    </insert>
    
    <!-- ðŸ”§ ì‚¬ìš©ìž IDë¥¼ ê¸°ë°˜ìœ¼ë¡œ users í…Œì´ë¸”ì—ì„œ í•´ë‹¹ ì‚¬ìš©ìžì˜ ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ -->
	<select id="findById" parameterType="int" resultType="com.bbs.demo.domain.Users">
	    SELECT * FROM users WHERE id = #{id}
	</select>
        
    <update id="lastLogin" parameterType="int">
		UPDATE users
			SET last_access_date = now()
			WHERE id = #{id};
    </update>

</mapper>
